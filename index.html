<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>A stronger UUID.</title>
<style>
  :root{
    --bg:#f5f7fa;
    --card:#fff;
    --primary:#0b79f0;
    --muted:#6c757d;
  }

  body{
    font-family: monospace;
    background:var(--bg);
    height:100vh;
    margin:0;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    gap:12px;
    padding:18px;
    box-sizing:border-box;
  }

  .header {
    width: 100%;
    max-width: 900px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    box-sizing: border-box;
  }

  h1{
    margin:0;
    font-size:1.1rem;
    color:#222;
    padding: 14px 18px;
    background: transparent;
    border-radius: 8px;
    box-sizing: border-box;
  }

  .gif-wrap{
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 8px 12px;
    box-sizing: border-box;
    border-radius: 8px;
    background: transparent;
    min-width: 88px;
    max-width: 220px;
  }

  #uuid, button {
    width:90%;
    max-width:900px;
    box-sizing:border-box;
  }
  #uuid{
    background:var(--card);
    border:1px solid #d0d7df;
    padding:12px;
    border-radius:8px;
    word-break:break-all;
    text-align:center;
    font-size:1rem;
  }
  .controls{ display:flex; gap:8px; width:90%; max-width:900px; justify-content:flex-start; }
  button{
    padding:10px 14px;
    border-radius:8px;
    border:0;
    cursor:pointer;
    background:var(--primary);
    color:#fff;
    font-weight:600;
  }
  button.secondary{ background:var(--muted); }

  @media (max-width:720px){
    .header { flex-direction: row; }
    .gif-wrap { max-width: 120px; }
  }
  @media (max-width:480px){
    .header { gap:8px; }
    .header { flex-direction: column; align-items: flex-start; }
    .gif-wrap { width:100%; display:flex; justify-content:flex-start; padding-left:4px; }
    h1 { width:100%; padding-left:8px; }
  }
</style>
</head>
<body>
  <div class="header">
    <h1><a href="https://www.tiktok.com/@le.corner.coder?_r=1&_t=ZS-9127FlydxXr" 
   style="text-decoration: none; color: #679CE6;">
  LC</a>UUID Generator, a stronger UUID</h1>

    <div class="gif-wrap">
      <div class="tenor-gif-embed"
           data-postid="508889876246077366"
           data-share-method="host"
           data-aspect-ratio="0.60274"
           data-width="100%">
        <a href="https://tenor.com/view/tenna-ant-tenna-mr-ant-tenna-deltarune-deltarune-chapter-3-gif-508889876246077366">tenna</a>
        from <a href="https://tenor.com/search/tenna-stickers">Deltarune tenna</a>
      </div>
    </div>
  </div>

  <div id="uuid">Click Generate to create an LCUUID</div>

  <div class="controls">
    <button onclick="generateUUID()">Generate</button>
    <button class="secondary" onclick="copyUUID()">Copy</button>
  </div>

<script type="text/javascript" async src="https://tenor.com/embed.js"></script>

<script>
const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789/:;()₱&@“.,?!’$€£¥₽#%^*+=_\\|~<>•';

function computeShift(){
  const base = (10 - 5) + (3*0) + (2<<0) - (1*0) + (6%6) + ((8/4)|0) - 1;
  const z1  = (17 - 17);
  const z2  = ((2 << 2) - 8);
  const z3  = ((9 / 3) - 3);
  const z4  = ((Math.pow(2,3) % 7) - (8 % 7));
  const z5  = ((0xF & 0x1) - (15 & 1) + 0);
  const z6  = (("a".charCodeAt(0) - 97) - 0);
  const z7  = (Number("10") - 10);
  const z8  = (Math.floor(5.9) - 5);
  const z9  = ((12 % 5) - (12 % 5));
  const z10 = (~~0);
  return Math.round(base + z1 + z2 + z3 + z4 + z5 + z6 + z7 + z8 + z9 + z10);
}
const shift = computeShift();

function shiftChar(char, shiftAmount){
  const idx = charset.indexOf(char);
  if (idx === -1) return char;
  return charset[(idx + shiftAmount + charset.length) % charset.length];
}

function randomCapitalize(str){
  return str.split('').map(c=>{
    if(/[A-Za-z]/.test(c) && Math.random() < 0.5) return c.toUpperCase();
    return c;
  }).join('');
}

function randFromCharset(){
  const idx = Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0] % charset.length);
  return charset[idx < 0 ? 0 : idx];
}

function digitToLetter(d){
  const n = parseInt(d,10);
  return String.fromCharCode(65 + n);
}

function encodeDateSection(dateStr){
  let pre = '';
  for(const ch of dateStr){
    if (/\d/.test(ch)){
      pre += digitToLetter(ch);
    } else {
      pre += ch;
    }
  }

  let encoded = '';
  for(const c of pre){
    encoded += shiftChar(c, shift);
    if(Math.random() < 0.5) encoded += randFromCharset();
  }

  encoded = randomCapitalize(encoded);
  return randFromCharset() + randFromCharset() + encoded + randFromCharset() + randFromCharset();
}

function randomSection(len){
  const arr = new Uint32Array(len);
  window.crypto.getRandomValues(arr);
  let s = '';
  for(let i=0;i<len;i++){
    const randByte = window.crypto.getRandomValues(new Uint32Array(1))[0];
    const idx = (arr[i] ^ randByte) % charset.length;
    s += charset[idx < 0 ? 0 : idx];
  }
  return s;
}

function generateVersionSection(){
  return randomSection(4).split('').map(c => shiftChar(c, Math.floor(Math.random()*charset.length))).join('');
}

function generateSequenceSection(){ return randomSection(4); }

async function generateNodeSection(){
  const fp = navigator.userAgent + navigator.platform +
             screen.width + 'x' + screen.height +
             screen.colorDepth + Intl.DateTimeFormat().resolvedOptions().timeZone +
             randFromCharset() + randFromCharset();
  const encoder = new TextEncoder();
  const data = encoder.encode(fp);
  const hashBuffer = await crypto.subtle.digest('SHA-256', data);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  let section = '';
  for(let i=0;i<16;i++){
    const idx = hashArray[i] % charset.length;
    section += charset[idx < 0 ? 0 : idx];
  }
  return section;
}

async function generateUUID(){
  const now = new Date();
  const dd = String(now.getDate()).padStart(2,'0');
  const mm = String(now.getMonth()+1).padStart(2,'0');
  const yyyy = String(now.getFullYear());
  const dateStr = dd + mm + yyyy;

  const sec1 = encodeDateSection(dateStr);
  const sec3 = generateVersionSection();
  const sec4 = generateSequenceSection();
  const sec5 = await generateNodeSection();

  // 20 entropy sections
  const entropySections = [];
  for(let i=0;i<20;i++){
    const len = Math.floor(Math.random() * 6 + 4); // 4-9 chars
    entropySections.push(`[${randomSection(len)}]`);
  }

  // 5 extra “evil” random sections
  const extraSections = [];
  for(let i=0;i<5;i++){
    const len = Math.floor(Math.random()*6 + 3); // 3–8 chars
    extraSections.push(`[${randomSection(len)}]`);
  }

  const full = `{[lcrnrUUID]}[${sec1}]${entropySections.join('')}[${sec3}][${sec4}][${sec5}]${extraSections.join('')}{[/lcrnrUUID]}`;
  document.getElementById('uuid').textContent = full;
}

function copyUUID(){
  const el = document.getElementById('uuid');
  const text = el.textContent || '';
  if(!text) return;
  navigator.clipboard?.writeText(text).then(()=>{
    const orig = el.textContent;
    el.textContent = 'Copied!';
    setTimeout(()=> el.textContent = orig, 900);
  }, ()=>{
    alert('Copy failed :( select and copy manually.');
  });
}
</script>
</body>
</html>
